<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web Crawler Tool - C√¥ng c·ª• Crawl D·ªØ li·ªáu</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <i class="fas fa-spider"></i>
                <span>Web Crawler Tool</span>
            </div>
            <div class="header-actions">
                <button id="helpBtn" class="btn btn-icon" title="H∆∞·ªõng d·∫´n">
                    <i class="fas fa-question-circle"></i>
                </button>
            </div>
        </header>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Sidebar - Controls -->
            <aside class="sidebar">
                <!-- URL Input -->
                <div class="panel">
                    <h3><i class="fas fa-link"></i> URL Trang Web</h3>
                    <div class="url-input-group">
                        <input type="text" id="urlInput" placeholder="D√°n link trang web v√†o ƒë√¢y..." />
                        <button id="loadBtn" class="btn btn-primary">
                            <i class="fas fa-eye"></i> Preview
                        </button>
                    </div>
                </div>

                <!-- Simple Selector -->
                <div class="panel">
                    <h3><i class="fas fa-crosshairs"></i> Ch·ªçn V√πng D·ªØ Li·ªáu</h3>
                    <div class="simple-controls">
                        <button id="selectModeBtn" class="btn btn-secondary btn-lg">
                            <i class="fas fa-mouse-pointer"></i> Ch·ªçn V√πng Ch·ª©a D·ªØ Li·ªáu
                        </button>
                        <p class="hint">Click v√†o v√πng ch·ª©a danh s√°ch d·ªØ li·ªáu (nh∆∞: danh s√°ch s·∫£n ph·∫©m, b√†i vi·∫øt...)</p>
                        
                        <div id="selectedArea" class="hidden selected-area">
                            <div class="selected-info">
                                <i class="fas fa-check-circle"></i>
                                <span>ƒê√£ ch·ªçn v√πng d·ªØ li·ªáu</span>
                            </div>
                            <div id="detectedFields" class="detected-fields"></div>
                        </div>
                    </div>
                </div>

                <!-- Actions -->
                <div class="panel actions-panel">
                    <button id="crawlBtn" class="btn btn-success btn-lg" disabled>
                        <i class="fas fa-download"></i> Crawl D·ªØ Li·ªáu
                    </button>
                    <button id="exportBtn" class="btn btn-excel btn-lg" disabled>
                        <i class="fas fa-file-excel"></i> Xu·∫•t Excel
                    </button>
                    <button id="clearBtn" class="btn btn-secondary">
                        <i class="fas fa-refresh"></i> Reset
                    </button>
                </div>
            </aside>

            <!-- Preview Area -->
            <main class="preview-area">
                <div class="preview-header">
                    <span id="previewUrl">Ch∆∞a load trang n√†o</span>
                    <div class="preview-actions">
                        <button id="refreshBtn" class="btn btn-icon" title="L√†m m·ªõi">
                            <i class="fas fa-sync-alt"></i>
                        </button>
                        <button id="openNewTabBtn" class="btn btn-icon" title="M·ªü trong tab m·ªõi">
                            <i class="fas fa-external-link-alt"></i>
                        </button>
                    </div>
                </div>
                <div class="preview-container">
                    <div id="loadingOverlay" class="hidden loading-overlay">
                        <div class="spinner"></div>
                        <p>ƒêang t·∫£i trang...</p>
                    </div>
                    <iframe id="previewFrame" sandbox="allow-same-origin allow-scripts"></iframe>
                </div>
            </main>

            <!-- Data Preview Panel -->
            <aside class="hidden data-panel" id="dataPanel">
                <div class="panel-header">
                    <h3><i class="fa-table fas"></i> D·ªØ li·ªáu ƒë√£ crawl</h3>
                    <button id="closeDataPanel" class="btn btn-icon">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="data-stats">
                    <span id="dataCount">0 d√≤ng d·ªØ li·ªáu</span>
                </div>
                <div class="data-table-container">
                    <table id="dataTable">
                        <thead></thead>
                        <tbody></tbody>
                    </table>
                </div>
            </aside>
        </div>

        <!-- Element Selector Modal -->
        <div id="selectorModal" class="hidden modal">
            <div class="modal-content">
                <h3><i class="fas fa-tag"></i> C·∫•u h√¨nh ph·∫ßn t·ª≠</h3>
                <div class="form-group">
                    <label>T√™n tr∆∞·ªùng (Column name):</label>
                    <input type="text" id="fieldName" placeholder="V√≠ d·ª•: Ti√™u ƒë·ªÅ, Gi√°, Link..." />
                </div>
                <div class="form-group">
                    <label>CSS Selector:</label>
                    <input type="text" id="cssSelector" readonly />
                </div>
                <div class="form-group">
                    <label>L·∫•y gi√° tr·ªã:</label>
                    <select id="attributeSelect">
                        <option value="text">Text (N·ªôi dung vƒÉn b·∫£n)</option>
                        <option value="href">href (Link URL)</option>
                        <option value="src">src (Ngu·ªìn h√¨nh ·∫£nh)</option>
                        <option value="value">value (Gi√° tr·ªã input)</option>
                        <option value="html">HTML (M√£ HTML)</option>
                        <option value="custom">Thu·ªôc t√≠nh kh√°c...</option>
                    </select>
                </div>
                <div class="form-group hidden" id="customAttrGroup">
                    <label>T√™n thu·ªôc t√≠nh:</label>
                    <input type="text" id="customAttribute" placeholder="data-id, title, alt..." />
                </div>
                <div class="form-group">
                    <label>Preview gi√° tr·ªã:</label>
                    <div id="valuePreview" class="value-preview">-</div>
                </div>
                <div class="modal-actions">
                    <button id="cancelSelector" class="btn btn-secondary">H·ªßy</button>
                    <button id="confirmSelector" class="btn btn-primary">Th√™m</button>
                </div>
            </div>
        </div>

        <!-- Help Modal -->
        <div id="helpModal" class="hidden modal">
            <div class="modal-content modal-lg">
                <h3><i class="fas fa-book"></i> H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng</h3>
                <div class="help-content">
                    <h4>üåê 1. Preview trang web</h4>
                    <p>D√°n URL c·ªßa trang web b·∫°n mu·ªën crawl v√†o √¥ nh·∫≠p v√† nh·∫•n "Preview"</p>
                    
                    <h4>üéØ 2. Ch·ªçn v√πng d·ªØ li·ªáu</h4>
                    <p>Nh·∫•n "Ch·ªçn V√πng Ch·ª©a D·ªØ Li·ªáu" r·ªìi click v√†o v√πng ch·ª©a danh s√°ch tr√™n trang (v√≠ d·ª•: v√πng ch·ª©a danh s√°ch s·∫£n ph·∫©m, b√†i vi·∫øt...)</p>
                    
                    <h4>ü§ñ 3. T·ª± ƒë·ªông ph√°t hi·ªán</h4>
                    <p>H·ªá th·ªëng s·∫Ω t·ª± ƒë·ªông ph√°t hi·ªán c√°c tr∆∞·ªùng d·ªØ li·ªáu c√≥ th·ªÉ crawl ƒë∆∞·ª£c nh∆∞:</p>
                    <ul>
                        <li><strong>Link:</strong> ƒê∆∞·ªùng d·∫´n URL</li>
                        <li><strong>H√¨nh ·∫£nh:</strong> Ngu·ªìn ·∫£nh</li>
                        <li><strong>Ti√™u ƒë·ªÅ:</strong> VƒÉn b·∫£n ti√™u ƒë·ªÅ</li>
                        <li><strong>Gi√°:</strong> Th√¥ng tin gi√° (c√≥ k√Ω t·ª± ƒë, $)</li>
                        <li><strong>M√¥ t·∫£:</strong> N·ªôi dung vƒÉn b·∫£n d√†i</li>
                    </ul>
                    
                    <h4>‚ö° 4. Crawl v√† xu·∫•t Excel</h4>
                    <p>Nh·∫•n "Crawl D·ªØ li·ªáu" ƒë·ªÉ l·∫•y d·ªØ li·ªáu t·ª´ t·∫•t c·∫£ items, sau ƒë√≥ "Xu·∫•t Excel" ƒë·ªÉ t·∫£i file</p>
                    
                    <h4>üí° M·∫πo s·ª≠ d·ª•ng</h4>
                    <ul>
                        <li>Ch·ªçn v√πng ch·ª©a nhi·ªÅu items gi·ªëng nhau ƒë·ªÉ crawl h√†ng lo·∫°t</li>
                        <li>H·ªá th·ªëng t·ª± ƒë·ªông ph√°t hi·ªán c·∫•u tr√∫c, kh√¥ng c·∫ßn setup ph·ª©c t·∫°p</li>
                        <li>D·ªØ li·ªáu s·∫Ω ƒë∆∞·ª£c xu·∫•t th√†nh file Excel v·ªõi ƒë·∫ßy ƒë·ªß c√°c c·ªôt</li>
                    </ul>
                </div>
                <div class="modal-actions">
                    <button id="closeHelp" class="btn btn-primary">ƒê√£ hi·ªÉu</button>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
